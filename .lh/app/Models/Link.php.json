{
    "sourceFile": "app/Models/Link.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1642142661327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1642142668537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,25 +31,25 @@\n     $str = preg_replace(\"/(Đ)/\", \"D\", $str);\n     return  Str::slug(str_replace(\"&*#39;\", \"\", $str), '-');\n   }\n \n-  public function updateConversionCode($params=[])\n-    {\n-        if(!empty($params['facebook_id'])){\n-            $this->track_facebook = $params['facebook_id'];\n-        }\n-        if(!empty($params['google_analytics_id'])){\n-            $this->track_google_analytics = $params['google_analytics_id'];\n-        }\n-        if(!empty($params['tiktok_id'])){\n-            $this->track_tiktok = $params['tiktok_id'];\n-        }\n-        if(!empty($params['google_ads_id'])){\n-            $this->track_google_ads = $params['google_ads_id'];\n-        }\n-        $this->save();\n+  public function updateConversionCode($params = [])\n+  {\n+    if (!empty($params['facebook_id'])) {\n+      $this->track_facebook = $params['facebook_id'];\n     }\n-  public static function publish($slug, $model,$prefix= null,$uid = null)\n+    if (!empty($params['google_analytics_id'])) {\n+      $this->track_google_analytics = $params['google_analytics_id'];\n+    }\n+    if (!empty($params['tiktok_id'])) {\n+      $this->track_tiktok = $params['tiktok_id'];\n+    }\n+    if (!empty($params['google_ads_id'])) {\n+      $this->track_google_ads = $params['google_ads_id'];\n+    }\n+    $this->save();\n+  }\n+  public static function publish($slug, $model, $prefix = null, $uid = null)\n   {\n     return static::create([\n       'pretty'      =>  static::slug($slug),\n       'belong_type' =>  get_class($model),\n@@ -58,13 +58,15 @@\n       'prefix'      =>  $prefix\n     ]);\n   }\n \n-  public function points(){\n+  public function points()\n+  {\n     return $this->hasMany(TrackingPoint::class);\n   }\n \n-  public function orders(){\n+  public function orders()\n+  {\n     return $this->hasMany(Order::class);\n   }\n \n   static function boot()\n"
                }
            ],
            "date": 1642142661327,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Support\\Str;\nuse App\\Traits\\Belong;\n\nclass Link extends Model\n{\n  use HasFactory, Belong;\n\n  protected $guarded  = ['id'];\n\n  static function slug($str)\n  {\n    $str = preg_replace(\"/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/\", \"a\", $str);\n    $str = preg_replace(\"/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/\", \"e\", $str);\n    $str = preg_replace(\"/(ì|í|ị|ỉ|ĩ)/\", \"i\", $str);\n    $str = preg_replace(\"/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/\", \"o\", $str);\n    $str = preg_replace(\"/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/\", \"u\", $str);\n    $str = preg_replace(\"/(ỳ|ý|ỵ|ỷ|ỹ)/\", \"y\", $str);\n    $str = preg_replace(\"/(đ)/\", \"d\", $str);\n    $str = preg_replace(\"/(À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ)/\", \"A\", $str);\n    $str = preg_replace(\"/(È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ)/\", \"E\", $str);\n    $str = preg_replace(\"/(Ì|Í|Ị|Ỉ|Ĩ)/\", \"I\", $str);\n    $str = preg_replace(\"/(Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ)/\", \"O\", $str);\n    $str = preg_replace(\"/(Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ)/\", \"U\", $str);\n    $str = preg_replace(\"/(Ỳ|Ý|Ỵ|Ỷ|Ỹ)/\", \"Y\", $str);\n    $str = preg_replace(\"/(Đ)/\", \"D\", $str);\n    return  Str::slug(str_replace(\"&*#39;\", \"\", $str), '-');\n  }\n\n  public function updateConversionCode($params=[])\n    {\n        if(!empty($params['facebook_id'])){\n            $this->track_facebook = $params['facebook_id'];\n        }\n        if(!empty($params['google_analytics_id'])){\n            $this->track_google_analytics = $params['google_analytics_id'];\n        }\n        if(!empty($params['tiktok_id'])){\n            $this->track_tiktok = $params['tiktok_id'];\n        }\n        if(!empty($params['google_ads_id'])){\n            $this->track_google_ads = $params['google_ads_id'];\n        }\n        $this->save();\n    }\n  public static function publish($slug, $model,$prefix= null,$uid = null)\n  {\n    return static::create([\n      'pretty'      =>  static::slug($slug),\n      'belong_type' =>  get_class($model),\n      'belong_id'   =>  $model->id,\n      'auth_id'     =>  $uid,\n      'prefix'      =>  $prefix\n    ]);\n  }\n\n  public function points(){\n    return $this->hasMany(TrackingPoint::class);\n  }\n\n  public function orders(){\n    return $this->hasMany(Order::class);\n  }\n\n  static function boot()\n  {\n    parent::boot();\n    static::creating(function ($model) {\n      $model->short  = uniqid();\n      if (static::wherePretty($model->pretty)->exists())\n        $model->pretty .= '.' . $model->short;\n    });\n  }\n}\n"
        }
    ]
}